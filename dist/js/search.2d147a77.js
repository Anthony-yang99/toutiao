"use strict";(self["webpackChunkvue_hmtt"]=self["webpackChunkvue_hmtt"]||[]).push([[464],{9667:function(t,s,e){e.r(s),e.d(s,{default:function(){return l}});var i=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"search-header"},[s("van-icon",{staticClass:"goback",attrs:{name:"arrow-left",color:"white",size:"0.48rem"},on:{click:function(s){return t.$router.back()}}}),s("van-search",{directives:[{name:"focu",rawName:"v-focu"}],attrs:{placeholder:"请输入搜索关键词",background:"#007BFF",shape:"round"},on:{input:t.inputfn,search:t.enterFn},model:{value:t.kw,callback:function(s){t.kw="string"===typeof s?s.trim():s},expression:"kw"}})],1),0!==t.kw.length?s("div",{staticClass:"sugg-list"},t._l(t.suggestionList,(function(e,i){return s("div",{key:i,staticClass:"sugg-item",domProps:{innerHTML:t._s(t.lightFn(e,t.kw))},on:{click:function(s){return t.clickFn(e)}}})})),0):s("div",{staticClass:"search-history"},[s("van-cell",{attrs:{title:"搜索历史"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[s("van-icon",{staticClass:"search-icon",attrs:{name:"delete"},on:{click:t.cleanFn}})]},proxy:!0}])}),s("div",{staticClass:"history-list"},t._l(t.history,(function(e,i){return s("span",{key:i,staticClass:"history-item",on:{click:function(s){return t.hisClickFn(e)}}},[t._v(t._s(e))])})),0)],1)])},n=[],r=e(586),a={data(){return{kw:"",timer:null,suggestionList:[],history:JSON.parse(localStorage.getItem("his"))||[]}},methods:{inputfn(){0===this.kw.length?this.suggestionList=[]:(clearTimeout(this.timer),this.timer=setTimeout((async()=>{const{data:t}=await(0,r.MP)({keyword:this.kw});this.suggestionList=t.data.options}),1e3))},lightFn(t,s){const e=new RegExp(s,"i");if(null!==t)return t.replace(e,(t=>`<span style="color:red;">${t}</span>`))},enterFn(){this.kw.length>0&&(this.history.push(this.kw),setTimeout((()=>{this.$router.push({path:`/search_result/${this.kw}`})}),0))},clickFn(t){this.history.push(t),setTimeout((()=>{this.$router.push({path:`/search_result/${t}`})}),0)},hisClickFn(t){this.$router.push({path:`/search_result/${t}`})},cleanFn(){this.history=[]}},watch:{history:{deep:!0,handler(){const t=new Set(this.history),s=Array.from(t);localStorage.setItem("his",JSON.stringify(s))}}}},o=a,c=e(1001),h=(0,c.Z)(o,i,n,!1,null,"2477440e",null),l=h.exports}}]);
//# sourceMappingURL=search.2d147a77.js.map